# FundPulse 更新日志

## [2.0.1] - 2026-02-01

### ✨ 新增功能

#### 版本检查和自动更新机制

- ✅ 实现版本检查工具，自动检测应用更新
- ✅ 支持版本号和时间戳双重检查机制
- ✅ Service Worker 更新监听，自动刷新页面
- ✅ 版本号自动从 `package.json` 读取并注入到 HTML

#### 统一添加基金弹窗

- ✅ 统一首页和自选页面的添加基金弹窗样式
- ✅ 支持按金额输入和按数量输入两种模式
- ✅ 自动显示预计计算结果

#### 默认填充当前净值

- ✅ 打开持仓弹窗时自动填充当前净值到成本价输入框
- ✅ 支持所有添加/修改持仓的场景

### 🎨 UI/UX 优化

- ✅ PC 端自选页面表格列宽优化，使用固定列宽布局
- ✅ 移动端 AI 标识按钮移到卡片右上角
- ✅ PC 端基金类型显示位置调整，移到基金代码后面
- ✅ 统一移动端和 PC 端的显示风格

### 🐛 问题修复

#### ETF 基金过滤问题

- ✅ 修复 ETF 基金不应该发起实时估值请求的问题
- ✅ 添加 ETF 基金过滤逻辑，避免队列混乱
- ✅ 修复"未匹配的基金代码"警告

#### TypeScript 编译错误

- ✅ 修复 `HomePage.tsx` 中未使用的变量错误
- ✅ 修复 `FundStore` 接口缺少方法声明的问题
- ✅ 修复 `FundSearchResult` 接口缺少字段的问题

### 🔧 基础设施

- ✅ 热门板块接口添加反向代理支持
- ✅ 配置版本号自动注入机制
- ✅ 优化 Service Worker 配置

---

## [2.0.0] - 之前版本

### 核心功能

- ✅ 基金实时净值追踪
- ✅ 自选基金管理
- ✅ 净值走势图
- ✅ 重仓股展示
- ✅ 指数看板
- ✅ PWA 支持

---

## 更新说明

### 如何更新版本号

1. 修改 `package.json` 中的 `version` 字段
2. 构建时会自动将版本号注入到 `index.html`
3. 用户访问时会自动检测更新并刷新

### 版本检查机制

- **检查频率**: 每 10 分钟检查一次版本
- **Service Worker**: 每 5 分钟检查一次更新
- **检查方式**:
  1. 版本号检查（主要）
  2. 时间戳检查（备用）
  3. Service Worker 更新监听

### 已知问题

- 部分 API 文件中有 `any` 类型警告（不影响功能）
- React Hooks 依赖项警告（已优化，不影响功能）

---

**维护者**: FundPulse Team  
**最后更新**: 2026 年 2 月 1 日
