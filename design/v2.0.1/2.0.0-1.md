# 正确的 v2.0.1 布局应该是：

```
┌─────────────────────────────────────────┐
│     横向滚动指数条 (全宽)                  │
├──────────────────┬──────────────────────┤
│                  │                      │
│   热门板块榜      │    基金排行榜         │
│   (原指数位置)    │    (保持原有功能)      │
│                  │                      │
│   行业/概念切换   │    类型筛选+搜索       │
│   涨跌家数可视化   │    列表+操作按钮       │
│                  │                      │
└──────────────────┴──────────────────────┘
```

**修正后的完整设计文档：**

---

## FundPulse v2.0.1 产品重构设计文档

### 整体结构（Container 约束宽度）

**tsx**复制

```tsx
<HomeContainer className="max-w-[1400px] mx-auto px-4 sm:px-6 py-4 space-y-4">
  {/* 1. 指数条（同宽，非全宽） */}
  <IndexSection>{/* 分类 Tab + 横向滚动指数 */}</IndexSection>

  {/* 2. 双列内容区（板块 + 基金） */}
  <ContentGrid className="grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-4">
    <SectorBoard />
    {/* 左侧板块榜 */}
    <FundRanking />
    {/* 右侧基金榜 */}
  </ContentGrid>
</HomeContainer>
```

---

### 1. 指数条组件（IndexSection）

**特征** ：

- 与下方双列同宽（Container 约束）
- 保留沪深/港股/美股 **分类切换 Tab**
- Tab 下方横向滚动指数卡片
- 每个卡片显示：名称 + 最新价（翻牌）+ 涨跌额 + 涨跌幅

**tsx**复制

```tsx
// components/IndexSection.tsx
const CATEGORIES = [
  { id: "cn", label: "沪深", codes: "sh000001,sz399001,sz399006,sh000300" },
  { id: "hk", label: "港股", codes: "hkHSI,hkHSCEI,hkHSTECH" },
  { id: "us", label: "美股", codes: "usIXIC,usDJI,usSPX" },
];

export const IndexSection = () => {
  const [activeCategory, setActiveCategory] = useState("cn");
  const [indices, setIndices] = useState([]);

  useEffect(() => {
    loadIndices(activeCategory);
    const timer = setInterval(() => loadIndices(activeCategory), 30000);
    return () => clearInterval(timer);
  }, [activeCategory]);

  return (
    <div className="glass-card p-4">
      {/* 分类 Tab */}
      <div className="flex items-center gap-2 mb-4 border-b border-white/10 pb-3">
        <div className="flex bg-black/30 rounded-lg p-1">
          {CATEGORIES.map((cat) => (
            <button
              key={cat.id}
              onClick={() => setActiveCategory(cat.id)}
              className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${
                activeCategory === cat.id
                  ? "bg-white/10 text-white shadow-[0_0_15px_rgba(255,45,85,0.3)]"
                  : "text-text-secondary hover:text-white"
              }`}
            >
              {cat.label}
            </button>
          ))}
        </div>
        <div className="ml-auto flex items-center gap-2 text-xs text-text-tertiary">
          <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse" />
          实时更新
        </div>
      </div>

      {/* 横向滚动指数 */}
      <div className="relative overflow-hidden">
        <div className="flex gap-3 overflow-x-auto scrollbar-hide pb-1">
          {indices.map((idx, i) => (
            <IndexCard
              key={idx.code}
              rank={i + 1}
              name={idx.name}
              price={idx.price}
              change={idx.change}
              changePercent={idx.changePercent}
            />
          ))}
        </div>
      </div>
    </div>
  );
};

// 指数卡片（带翻牌动画）
const IndexCard = ({ name, price, change, changePercent }) => {
  return (
    <div className="flex-shrink-0 w-[160px] p-3 rounded-lg bg-white/5 border border-white/10 hover:border-white/20 transition-all">
      <div className="text-xs text-text-secondary mb-1">{name}</div>

      {/* 最新价（翻牌动画） */}
      <div className="text-xl font-mono font-bold text-text-primary mb-1">
        <FlipNumber value={price} decimals={2} />
      </div>

      {/* 涨跌信息 */}
      <div className="flex items-center gap-2 text-xs">
        <span className={change >= 0 ? "text-red-400" : "text-green-400"}>
          {change >= 0 ? "+" : ""}
          {change.toFixed(2)}
        </span>
        <span
          className={`px-1.5 py-0.5 rounded ${
            change >= 0
              ? "bg-red-500/20 text-red-400"
              : "bg-green-500/20 text-green-400"
          }`}
        >
          {changePercent > 0 ? "+" : ""}
          {changePercent.toFixed(2)}%
        </span>
      </div>
    </div>
  );
};
```

---

### 2. 双列内容区（保持不变）

**tsx**复制

```tsx
<ContentGrid className="grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-4">
  {/* 左列：板块榜（同之前设计） */}
  <SectorBoard className="h-[600px]" />

  {/* 右列：基金榜（同之前设计） */}
  <FundRanking className="h-[600px]" />
</ContentGrid>
```

---

### 3. CSS 数字翻牌动画（完整版）

**css**复制

```css
/* 数字翻牌关键帧 */
@keyframes flip-number-up {
  0% {
    transform: translateY(0);
    filter: brightness(1);
  }
  40% {
    transform: translateY(-50%) rotateX(90deg);
    filter: brightness(1.5);
    opacity: 0.5;
  }
  60% {
    transform: translateY(50%) rotateX(-90deg);
    filter: brightness(1.5);
    opacity: 0.5;
  }
  100% {
    transform: translateY(0);
    filter: brightness(1);
  }
}

@keyframes flip-number-down {
  0% {
    transform: translateY(0);
    filter: brightness(1);
  }
  40% {
    transform: translateY(50%) rotateX(-90deg);
    filter: brightness(1.5);
    opacity: 0.5;
  }
  60% {
    transform: translateY(-50%) rotateX(90deg);
    filter: brightness(1.5);
    opacity: 0.5;
  }
  100% {
    transform: translateY(0);
    filter: brightness(1);
  }
}

/* 涨跌颜色渐变动画 */
@keyframes trend-glow-red {
  0%,
  100% {
    color: #ff453a;
    text-shadow: 0 0 5px rgba(255, 69, 58, 0.3);
  }
  50% {
    color: #ff6b6b;
    text-shadow: 0 0 20px rgba(255, 69, 58, 0.8), 0 0 40px rgba(255, 69, 58, 0.4);
  }
}

@keyframes trend-glow-green {
  0%,
  100% {
    color: #32d74b;
    text-shadow: 0 0 5px rgba(50, 215, 75, 0.3);
  }
  50% {
    color: #4ade80;
    text-shadow: 0 0 20px rgba(50, 215, 75, 0.8), 0 0 40px rgba(50, 215, 75, 0.4);
  }
}

/* React 组件样式 */
.flip-number {
  display: inline-block;
  font-variant-numeric: tabular-nums;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.flip-number.updating-up {
  animation: flip-number-up 0.3s ease-in-out;
  color: #ff453a;
}

.flip-number.updating-down {
  animation: flip-number-down 0.3s ease-in-out;
  color: #32d74b;
}

.trend-up {
  animation: trend-glow-red 2s ease-in-out infinite;
}

.trend-down {
  animation: trend-glow-green 2s ease-in-out infinite;
}

/* 隐藏滚动条 */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
```

## 4. 响应式适配

**桌面端 (≥1024px)** ：

- 指数条：同宽横向滚动
- 内容区：两列（板块 380px + 基金自适应）

  **平板端 (768px-1024px)** ：

- 指数条：保持横向，但可左右滑动（触摸）
- 内容区：两列（比例 1:1）

  **移动端 (<768px)** ：

- 指数条：全宽，强制横向滚动（手指滑动）
- 内容区：单列堆叠（板块在上，基金在下）

**css**复制

```css
/* 响应式断点 */
@media (max-width: 1024px) {
  .content-grid {
    grid-template-columns: 1fr; /* 单列 */
  }
  .sector-board {
    height: 300px; /* 板块区减半高度 */
  }
}
```

---

## 5. 数据源配置汇总

**表格**复制

| 区块       | 接口                                               | 调用方式          | 字段                                    |
| :--------- | :------------------------------------------------- | :---------------- | :-------------------------------------- |
| **指数条** | `qt.gtimg.cn/q=sh000001,...`                       | JSONP             | 3:最新价, 29:涨跌额, 30:涨跌幅          |
| **板块榜** | `push2.eastmoney.com/api/qt/clist/get?fs=m:90+t:2` | JSONP             | f3:涨跌幅, f104:上涨家数, f105:下跌家数 |
| **基金榜** | `fund.eastmoney.com/data/rankhandler.aspx`         | JSONP/Worker 代理 | 7:日涨幅, 9:近 1 月                     |

---

## FundPulse v2.0.1 修正版布局

1. ✅ **指数条非全宽** → 与下方同宽（Container 约束 max-w-[1400px]）
2. ✅ **保留分类 Tab** → 沪深/港股/美股切换在指数条顶部
3. ✅ **横向滚动** → 分类下方横向滚动展示该分类下的指数
4. ✅ **数字翻牌** → 最新价变动时 flip 动画
5. ✅ **显示涨跌额** → 卡片内同时显示涨跌额 + 涨跌幅百分比
